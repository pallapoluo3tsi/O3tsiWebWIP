function grabToken(a){var b=(new Date).getTime();jQuery.getJSON("/token-gen/"+a.id+"?_="+b,function(b){a.querySelector('[name="_submit"]').value=b.token})}function formSubmit(a){a.preventDefault();var b=jQuery(this).serializeFormJSON();b._formID=this.id,b.c_time=(new Date).getTime()-timer<7e3?1:0,jQuery.ajax({url:"/checker",type:"POST",dataType:"json",data:b}).done(function(a){var b=jQuery(".error-message");if(jQuery(".error").removeClass("error"),b.css("display","none"),a.errors){var c=a.errors;b.html(c["contact-error"]),b.css("display","block"),b.animate({opacity:1},500),jQuery(".contact-form input, .contact-form select, .contact-form textarea").each(function(){this.getAttribute("id")in a.errors&&(this.className+=" error",jQuery(this).is("select")&&jQuery(this).parents(".select-wrapper").addClass("error"))}),scrollToElement(".error-message",1e3)}else{var d=jQuery(".contact-form"),e=document.querySelector(".contact-form");d.velocity("fadeOut",{duration:400,complete:function(){var b=a.msg?a.msg:document.getElementById("message-hidden").innerHTML;e.innerHTML='<div class="success-message" aria-live="polite">'+b+"</div>",d.velocity("fadeIn",{duration:400})}});var f="/contact-complete/";console.log(f),ga("send","pageview",f)}}).fail(function(a){console.log("error: "+JSON.stringify(a))}).always(function(){})}var timer=(new Date).getTime(),forms=document.querySelectorAll("form");for(i=0;i<forms.length;i++)grabToken(forms[i]),forms[i].addEventListener("submit",formSubmit);